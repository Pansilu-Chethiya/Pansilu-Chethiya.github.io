<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pansilu Chethiya | üòä</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Highlight.js styles (only stylesheet here; init runs after DOM) -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">

  <style>
    /* --- base / vars --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    :root {
      --bg: #0d1117;
      --card: #161b22;
      --text: #f0f6fc;
      --muted: #8b949e;
      --accent: #00aaff;
      --transition: 0.3s ease;
    }

    body.light {
      --bg: #f6f8fa;
      --card: #ffffff;
      --text: #1b1f23;
      --muted: #4a5568;
      --accent: #0077ff;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
      transition: background var(--transition), color var(--transition);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* --- header / nav --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 1100px;
      padding: 1.5rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    header h1 { color: var(--accent); font-size: 1.8rem; }
    nav a {
      color: var(--muted);
      text-decoration: none;
      transition: var(--transition);
      font-size: 1rem;
      margin-left: 1rem;
    }
    nav a:hover { color: var(--accent); }

    .theme-toggle {
      background: var(--card);
      color: var(--accent);
      border: 1px solid var(--accent);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }
    .theme-toggle:hover { background: var(--accent); color: #fff; }

    /* --- hero / game --- */
    .hero {
      text-align: center;
      padding: 4rem 1.5rem;
      max-width: 800px;
    }
    .hero h2 { font-size: clamp(1.8rem, 5vw, 2.5rem); margin-bottom: 0.5rem; }
    .hero p { color: var(--muted); font-size: 1rem; margin-bottom: 2rem; line-height: 1.5; }
    .hero button {
      padding: 0.8rem 2rem; background: var(--accent); color: #fff; border: none; border-radius: 8px;
      cursor: pointer; font-size: 1rem; transition: var(--transition);
    }
    .hero button:hover { background: #0088cc; transform: translateY(-3px); }

    .game-section {
      text-align: center; padding: 3rem 1rem; width: 100%; max-width: 1000px;
    }
    .game-section h2 {
      color: var(--accent); margin-bottom: 1.2rem; font-size: clamp(1.5rem, 4vw, 2rem);
    }
    .game-wrapper { display:flex; justify-content:center; width:100%; overflow:hidden; }
    canvas {
      border: 3px solid var(--accent); border-radius: 12px; background: #000;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4); max-width: 100%; height: auto;
    }

    /* --- code editor mini UI --- */
    .code-section { text-align: center; padding: 3rem 1rem; max-width: 900px; margin: 0 auto 2rem; }
    .code-section h2 { color: var(--accent); margin-bottom: 0.5rem; }
    .code-section p { color: var(--muted); margin-bottom: 1rem; }

    .code-container {
      background: var(--card);
      border-radius: 10px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);
      text-align: left;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.03);
    }

    /* fake title bar */
    .code-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border-bottom: 1px solid rgba(255,255,255,0.02);
    }
    .window-buttons { display:flex; gap:8px; align-items:center; }
    .btn {
      width:12px; height:12px; border-radius:50%; display:inline-block;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,0.25);
    }
    .btn.close { background:#ff5f56; }
    .btn.min { background:#ffbd2e; }
    .btn.max { background:#27c93f; }

    .code-filename {
      color: var(--muted);
      font-size: 0.9rem;
      margin-left: 8px;
    }

    pre { margin: 0; overflow-x: auto; padding: 16px; }
    code {
      font-family: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      line-height: 1.45;
      font-size: 0.9rem;
      display: block;
      white-space: pre;
    }

    /* responsive tweaks */
    @media (max-width:520px) {
      .hero { padding: 2.5rem 1rem; }
      .code-section { padding: 2rem 1rem; }
      pre { padding: 12px; font-size: 0.85rem; }
    }

    /* contact/footer */
    .contact { text-align: left; padding: 2.5rem 1.5rem; max-width:900px; width:100%; margin:0 auto 2rem; }
    .contact h2 { color: var(--accent); margin-bottom: 0.6rem; }
    .contact p { color: var(--muted); margin-bottom: 0.7rem; }
    .contact a {
      display: inline-block; background: var(--accent); color: white; padding: 0.6rem 1rem;
      border-radius: 8px; text-decoration: none; transition: var(--transition);
    }
    .contact a:hover { background: #0088cc; }

    footer { text-align: center; color: var(--muted); font-size: 0.9rem; padding: 1rem; width: 100%; }
  </style>
</head>

<body>
  <header>
    <h1>Pansilu Chethiya</h1>
    <nav>
      <a href="#game">Game</a>
      <a href="#contact">Contact</a>
    </nav>
    <button class="theme-toggle" id="themeToggle">üåõ</button>
  </header>

  <section class="hero">
    <h2>Flappy Bird Clone (Also known as the wild Vihanga) üê§</h2>
    <p>A sleek, responsive recreation of Vihanga Bird built with HTML and JavaScript (almost). Works beautifully on both desktop and mobile ‚Äî tap or press W to flap!</p>
    <button onclick="document.getElementById('game').scrollIntoView({behavior:'smooth'})">Play Now (or else)</button>
  </section>

  <section id="game" class="game-section">
    <h2>üéÆ Play the Game</h2>
    <div class="game-wrapper">
      <canvas id="gameCanvas" width="400" height="650"></canvas>
    </div>
  </section>

  <!-- CODE DISPLAY -->
  <section class="code-section" aria-labelledby="codeHeading">
    <h2 id="codeHeading">üêç The Python Code Behind the Game</h2>
    <p>Here‚Äôs the Pygame version ‚Äî shown in a cozy mini-editor.</p>

    <div class="code-container" role="region" aria-label="Python code example">
      <div class="code-header">
        <div class="window-buttons" aria-hidden="true">
          <span class="btn close"></span>
          <span class="btn min"></span>
          <span class="btn max"></span>
        </div>
        <div class="code-filename">FlappyBird.py</div>
      </div>

      <pre><code class="language-python">
import pygame
from sys import exit
import random

GAME_WIDTH = 360
GAME_HEIGHT = 640

bird_x = GAME_WIDTH / 8
bird_y = GAME_HEIGHT / 2
bird_width = 34
bird_height = 24

class Bird(pygame.Rect):
    def __init__(self, img):
        super().__init__(bird_x, bird_y, bird_width, bird_height)
        self.image = img

pipe_x = GAME_WIDTH
pipe_y = 0
pipe_width = 64
pipe_height = 512

class Pipe(pygame.Rect):
    def __init__(self, x, y, img):
        super().__init__(x, y, pipe_width, pipe_height)
        self.image = img
        self.passed = False

pygame.init()
window = pygame.display.set_mode((GAME_WIDTH, GAME_HEIGHT))
pygame.display.set_caption("Flappy Bird")
clock = pygame.time.Clock()

create_pipes_timer = pygame.USEREVENT + 0
pygame.time.set_timer(create_pipes_timer, 1500)

background_image = pygame.image.load("flappybirdbg.png")
bird_image = pygame.transform.scale(pygame.image.load("flappybird.png"), (bird_width, bird_height))
top_pipe_image = pygame.transform.scale(pygame.image.load("toppipe.png"), (pipe_width, pipe_height))
bottom_pipe_image = pygame.transform.scale(pygame.image.load("bottompipe.png"), (pipe_width, pipe_height))

bird = Bird(bird_image)
pipes = []
velocity_x = -2
velocity_y = 0
gravity = 0.4
score = 0
game_over = False

def draw():
    window.blit(background_image, (0, 0))
    window.blit(bird.image, bird)
    for pipe in pipes:
        window.blit(pipe.image, pipe)

    font = pygame.font.SysFont("Comic Sans MS", 40)
    window.blit(font.render(str(int(score)), True, (255,255,255)), (5,0))

    if game_over:
        go_font = pygame.font.SysFont("Comic Sans MS", 50)
        go_text = go_font.render(f"Game Over: {int(score)}", True, (255, 0, 0))
        go_rect = go_text.get_rect(center=(GAME_WIDTH//2, GAME_HEIGHT//2))
        window.blit(go_text, go_rect)
        sub_font = pygame.font.SysFont("Comic Sans MS", 22)
        sub_text = sub_font.render("Press Space to restart or Q to close", True, (255,255,255))
        sub_rect = sub_text.get_rect(center=(GAME_WIDTH//2, GAME_HEIGHT//2+48))
        window.blit(sub_text, sub_rect)

def move():
    global velocity_y, score, game_over
    velocity_y += gravity
    bird.y += velocity_y
    bird.y = max(bird.y, 0)

    if bird.y > GAME_HEIGHT: game_over = True; return

    for pipe in pipes:
        pipe.x += velocity_x
        if not pipe.passed and bird.x > pipe.x + pipe.width:
            score += 0.5
            pipe.passed = True
        if bird.colliderect(pipe):
            game_over = True
            return

    while pipes and pipes[0].x < -pipe_width:
        pipes.pop(0)

def create_pipe():
    random_pipe_y = pipe_y - pipe_height/4 - random.random()*(pipe_height/2)
    opening_space = GAME_HEIGHT/4
    top_pipe = Pipe(pipe_x, random_pipe_y, top_pipe_image)
    bottom_pipe = Pipe(pipe_x, top_pipe.y + pipe_height + opening_space, bottom_pipe_image)
    pipes.extend([top_pipe, bottom_pipe])

def reset_game():
    global pipes, velocity_y, score, game_over
    pipes.clear()
    velocity_y = 0
    score = 0
    game_over = False
    bird.x = bird_x
    bird.y = bird_y

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT: pygame.quit(); exit()
        if event.type == create_pipes_timer and not game_over:
            create_pipe()
        if event.type == pygame.KEYDOWN:
            if not game_over and event.key in (pygame.K_SPACE, pygame.K_UP, pygame.K_w):
                velocity_y = -6
            if game_over:
                if event.key == pygame.K_SPACE: reset_game()
                if event.key == pygame.K_q: pygame.quit(); exit()

    if not game_over: move()
    draw()
    pygame.display.update()
    clock.tick(60)
      </code></pre>
    </div>
  </section>

  <section id="contact" class="contact">
    <h2>Let's Connect</h2>
    <p>Have feedback? Get in touch!</p>
    <a href="mailto:pansiluchethiya2012@outlook.com">üìß Email Me ‚Äî also on Discord: pansilululu_96243</a>
  </section>

  <footer>¬© 2025 Pansilu Chethiya</footer>

  <!-- Highlight.js script & theme toggle init AFTER DOM loads -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // init highlight.js
      if (window.hljs) hljs.highlightAll();

      // theme toggle
      const toggle = document.getElementById("themeToggle");
      const body = document.body;
      if (localStorage.getItem("theme") === "light") {
        body.classList.add("light");
        toggle.textContent = "‚òÄÔ∏è";
      }
      toggle.addEventListener("click", () => {
        body.classList.toggle("light");
        const isLight = body.classList.contains("light");
        toggle.textContent = isLight ? "‚òÄÔ∏è" : "üåõ";
        localStorage.setItem("theme", isLight ? "light" : "dark");
      });

      // resize canvas to be responsive
      const canvas = document.getElementById("gameCanvas");
      if (canvas) {
        const resizeCanvas = () => {
          const scale = Math.min(window.innerWidth / 400, 1);
          canvas.style.width = 400 * scale + "px";
          canvas.style.height = 650 * scale + "px";
        };
        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();
      }
    });
  </script>
</body>
</html>
